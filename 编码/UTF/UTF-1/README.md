# UTF-1

## 所收编码
### 实际存在
- [UTF-1](https://web.archive.org/web/20130423014856/http://www.itscj.ipsj.or.jp/ISO-IR/178.pdf)

### 架空编码
- WTF-1

## 解说
UTF-1 是一种兼容 ISO/IEC 2022 的 UTF，曾在 Unicode 1.0/1.1 中为推荐八位编码，但是在 Unicode 2.0 中被 UTF-8 [取代](https://www.unicode.org/versions/Unicode2.0.0/appC.pdf)。

## 字节结构
UTF-1 如下：

|字节数|第一字节|第二字节|第三字节|第四字节|第五字节|码位数|注释|
|-|-|-|-|-|-|-|-|
|单字节|0x00\~0x9F|||||160||
|双字节|0xA0\~0xF5|0x21\~0x7E, 0xA0\~0xFF||||16246||
|三字节|0xF6\~0xFB|0x21\~0x7E, 0xA0\~0xFF|0x21\~0x7E, 0xA0\~0xFF|||214552|0xF72FC4\~0xF73A78 通常不认为是合法码位。|
|五字节|0xFC|0x21|0x21\~0x39|0x21\~0x7E, 0xA0\~0xFF|0x21\~0x7E, 0xA0\~0xFF|881106||

WTF-1 如下：

|字节数|第一字节|第二字节|第三字节|第四字节|第五字节|码位数|注释|
|-|-|-|-|-|-|-|-|
|单字节|0x00\~0x9F|||||160||
|双字节|0xA0\~0xF5|0x21\~0x7E, 0xA0\~0xFF||||16246||
|三字节|0xF6\~0xFB|0x21\~0x7E, 0xA0\~0xFF|0x21\~0x7E, 0xA0\~0xFF|||214552|0xF72FC4\~0xF73A78 被启用。|
|五字节|0xFC|0x21|0x21\~0x39|0x21\~0x7E, 0xA0\~0xFF|0x21\~0x7E, 0xA0\~0xFF|881106||

## 与 UCS 的对应关系（UTF-1）
### U+0000\~U+009F
直接表示成单字节。

### U+00A0\~U+00FF
表示成单字节，然后在前面加上一个字节「0xA0」。

如「¾」表示成「0xA0BE」。

### U+0100\~U+4015
定义「/」为整除（保留整数部分）、「%」为求模，两者为同级运算。

定义函数 T：

|输入 z|函数 T(z)|输出 T(z)|
|-|-|-|
|0x00\~0x5D|z+0x21|0x21\~0x7E|
|0x5E\~0xBD|z+0x42|0xA0\~0xFF|
|0xBE\~0xDE|z-0xBE|0x00\~0x20|
|0xDF\~0xFF|z-0x60|0x7F\~0x9F|

UCS Code Point 记作 U。

则公式为：

0x100((U-0x100)/190+0xA1)+T((U-0x100)%190)

拆开来看，就可以这么理解：

先将 UCS Code Point 减去 0x100，记作 U₀。

然后将 U₀ 除以 190，取出商和余数，分别记作 a₁ 和 b₁。（即：(0x7E-0x21+1)+(0xFF-0xA0+1)=190）

设 t₁=T(b₁)。

则两个字节分别是：
- a₁+0xA1
- t₁

### U+4016\~U+38E2D
UCS Code Point 记作 U。

则公式为：

0x10000((U-0x4016)/36100+0xF6)+0x100(T((U-0x4016)%36100/190))+T((U-0x4016)%36100%190)

即：

0x10000((U-0x4016)/36100+0xF6)+0x100(T((U-0x4016)190/%190))+T((U-0x4016)%190)

拆开来看，就可以这么理解：

先将 UCS Code Point 减去 0x4016，记作 U₀。

然后将 U₀ 除以 36100，取出商和余数，分别记作 a₁ 和 b₁。((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))=36100）

将 b₁ 除以 190，取出商和余数，分别记作 a₂ 和 b₂。（即：(0x7E-0x21+1)+(0xFF-0xA0+1)=190）

设 t₂=T(a₂)、t₃=T(b₂)。

则三个字节分别是：
- a₁+0xF6
- t₂
- t₃

### U+38E2E\~U+10FFFF（以及废案 U+110000\~U+7FFFFFFF）
UCS Code Point 记作 U。

则公式为：

0x100000000((U-0x38E2E)/1303210000+0xFC)+0x1000000(T((U-0x38E2E)%1303210000/6859000))+0x10000(T((U-0x38E2E)%1303210000%6859000/36100))+0x100(T((U-0x38E2E)%1303210000%6859000%36100/190))+T((U-0x38E2E)%1303210000%6859000%36100%190)

即：

0x100000000((U-0x38E2E)/1303210000+0xFC)+0x1000000(T((U-0x38E2E)/6859000%190))+0x10000(T((U-0x38E2E)/636100%190))+0x100(T((U-0x38E2E)/190%190))+T((U-0x38E2E)%190)

拆开来看，就可以这么理解：

先将 UCS Code Point 减去 0x38E2E，记作 U₀。

然后将 U₀ 除以 1303210000，取出商和余数，分别记作 a₁ 和 b₁。（即：((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))=1303210000）

将 b₁ 除以 6859000，取出商和余数，分别记作 a₂ 和 b₂。（即：((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))=6859000）

将 b₂ 除以 36100，取出商和余数，分别记作 a₃ 和 b₃。（即：((0x7E-0x21+1)+(0xFF-0xA0+1))((0x7E-0x21+1)+(0xFF-0xA0+1))=36100）

将 b₃ 除以 190，取出商和余数，分别记作 a₄ 和 b₄。（即：(0x7E-0x21+1)+(0xFF-0xA0+1)=190）

设 t₂=T(a₂)、t₃=T(a₃)、t₄=T(a₄)、t₅=T(b₄)。

则五个字节分别是：
- a₁+0xFC
- t₂
- t₃
- t₄
- t₅

### U+D800\~U+DFFF
这一块不会定义任何字符，都拿来给 UTF-16 表示 non-BMP。

如果启用这一块，那这被叫作 WTF-1。

## 对 ISO/IEC 2022 的兼容
UTF-1 兼容 ISO/IEC 2022。

进入 UTF-1 时，使用 0x1B2542（ESC 02/05 04/02）。

回到 ISO/IEC 2022 时，使用 0x1B2540（ESC 02/05 04/00）。
